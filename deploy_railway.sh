#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ Railway
echo "üöÇ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ Finance Bot –Ω–∞ Railway..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ git
if ! command -v git &> /dev/null; then
    echo "‚ùå Git –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º—ã –≤ git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
if [ ! -d ".git" ]; then
    echo "üì¶ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π..."
    git init
    git add .
    git commit -m "Initial commit: Finance Bot ready for deployment"
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ Railway CLI
if ! command -v railway &> /dev/null; then
    echo "üì¶ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Railway CLI..."
    curl -fsSL https://railway.app/install.sh | sh
    export PATH="$HOME/.railway/bin:$PATH"
fi

echo "üîë –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Railway..."
echo "1. –í–æ–π–¥–∏—Ç–µ –≤ Railway: https://railway.app/"
echo "2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç"
echo "3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤–∞—à GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π"
echo "4. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:"
echo "   - BOT_TOKEN=–≤–∞—à_telegram_bot_token"
echo "   - OPENAI_API_KEY=–≤–∞—à_openai_api_key (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)"
echo "   - DATA_DIR=/app/data"
echo "   - DEBUG=false"
echo ""
echo "üìã –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Railway CLI:"
echo "   railway login"
echo "   railway link"
echo "   railway up"

echo "‚úÖ –ì–æ—Ç–æ–≤–æ! –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ RAILWAY_DEPLOY.md"
